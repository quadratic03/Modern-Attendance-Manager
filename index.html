<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Student Attendance Manager</title>
  
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Toastify for notifications -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  
  <!-- Datepicker -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  
  <!-- DataTables -->
  <link rel="stylesheet" href="https://cdn.datatables.net/1.13.5/css/dataTables.bootstrap5.min.css">
  
  <style id="app-style">
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3f37c9;
      --success-color: #4caf50;
      --danger-color: #f44336;
      --warning-color: #ff9800;
      --info-color: #2196f3;
      --light-color: #f8f9fa;
      --dark-color: #343a40;
      --sidebar-width: 250px;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: #f5f7fb;
      color: #333;
      overflow-x: hidden;
      position: relative;
    }
    
    /* Ensure toast notifications display above other elements */
    .toastify-custom {
      z-index: 9999;
    }
    
    .app-container {
      min-height: 100vh;
      display: flex;
      position: relative;
    }
    
    .sidebar {
      background-color: #fff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      height: 100vh;
      position: fixed;
      transition: all 0.3s ease;
      overflow-y: auto; /* Add scrollbar when content exceeds height */
      width: var(--sidebar-width);
      left: 0;
      top: 0;
      z-index: 1030;
    }
    
    /* Collapsed sidebar */
    .sidebar.collapsed {
      left: calc(-1 * var(--sidebar-width));
      box-shadow: none;
    }
    
    .sidebar .logo-container {
      padding: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .sidebar .logo-text {
      font-size: 1.2rem;
      font-weight: 700;
      text-align: center;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .sidebar .nav-link {
      color: #6c757d;
      border-radius: 5px;
      margin: 5px 0;
      transition: all 0.2s;
      position: relative; /* for the indicator */
      padding: 0.75rem 1rem;
    }
    
    .sidebar .nav-link:hover, .sidebar .nav-link.active {
      background-color: var(--primary-color);
      color: white;
    }
    
    .sidebar .nav-link i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    
    .sidebar .nav-link::after {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      width: 3px;
      height: 100%;
      background-color: transparent;
      transition: background-color 0.3s ease;
    }
    
    .sidebar .nav-link.active::after {
      background-color: var(--primary-color);
    }
    
    .sidebar .nav-link:hover {
      transform: scale(1.02);
    }
    
    .content-wrapper {
      padding: 20px;
      transition: all 0.3s ease;
      margin-left: var(--sidebar-width);
      width: calc(100% - var(--sidebar-width));
      flex: 1;
    }
    
    /* Content wrapper when sidebar is collapsed */
    .content-wrapper.expanded {
      margin-left: 0;
      width: 100%;
    }

    /* Sidebar toggler button */
    .sidebar-toggler {
      background-color: var(--primary-color);
      color: white;
      border: none;
      border-radius: 5px;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 1040;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .sidebar-toggler.active {
      left: calc(var(--sidebar-width) + 15px);
    }
    
    .page-title {
      font-weight: 600;
      color: var(--dark-color);
      margin-bottom: 20px;
    }
    
    /* For mobile view */
    @media (max-width: 768px) {
      .sidebar {
        width: var(--sidebar-width);
      }
      
      .content-wrapper {
        margin-left: 0;
        width: 100%;
        padding-top: 60px; /* Add space for the toggle button */
      }

      .sidebar-toggler.active {
        left: calc(var(--sidebar-width) + 5px);
      }
    }
    
    .card {
      border-radius: 10px;
      border: none;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      margin-bottom: 20px;
    }
    
    .card-header {
      background-color: white;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      font-weight: 600;
      padding: 15px 20px;
    }
    
    .form-control, .form-select {
      border-radius: 5px;
      padding: 10px 15px;
      border: 1px solid #ddd;
    }
    
    .form-control:focus, .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25);
    }
    
    .btn-primary {
      background-color: var(--primary-color);
      border-color: var(--primary-color);
    }
    
    .btn-primary:hover {
      background-color: var(--secondary-color);
      border-color: var(--secondary-color);
    }
    
    .btn {
      border-radius: 5px;
      padding: 8px 16px;
    }
    
    .status-badge {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }
    
    .status-present {
      background-color: rgba(76, 175, 80, 0.1);
      color: var(--success-color);
    }
    
    .status-absent {
      background-color: rgba(244, 67, 54, 0.1);
      color: var(--danger-color);
    }
    
    .status-late {
      background-color: rgba(255, 152, 0, 0.1);
      color: var(--warning-color);
    }
    
    .status-excused {
      background-color: rgba(33, 150, 243, 0.1);
      color: var(--info-color);
    }
    
    .loading-spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      margin-right: 0.5rem;
      vertical-align: text-bottom;
      border: 0.2em solid currentColor;
      border-right-color: transparent;
      border-radius: 50%;
      animation: spinner-border .75s linear infinite;
    }
    
    @keyframes spinner-border {
      to { transform: rotate(360deg); }
    }
    
    .dashboard-stats .card {
      border-left: 4px solid;
      transition: transform 0.3s;
    }
    
    .dashboard-stats .card:hover {
      transform: translateY(-5px);
    }
    
    .dashboard-stats .card-body {
      padding: 15px;
    }
    
    .dashboard-stats .stat-title {
      font-size: 0.9rem;
      color: #6c757d;
    }
    
    .dashboard-stats .stat-value {
      font-size: 1.75rem;
      font-weight: 600;
      margin: 5px 0;
    }
    
    .dashboard-stats .stat-icon {
      font-size: 2rem;
      opacity: 0.1;
      position: absolute;
      right: 15px;
      top: 15px;
    }
    
    .attendance-table th, .attendance-table td {
      vertical-align: middle;
    }
    
    .attendance-form label {
      font-weight: 500;
    }
    
    /* Datepicker customization */
    .flatpickr-day.selected {
      background: var(--primary-color);
      border-color: var(--primary-color);
    }
    
    /* Animation for feedback */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    /* New dark mode styles for sidebar */
    .sidebar.dark-mode {
      background-color: #2c2c2c;
      color: #f5f5f5;
    }
    .sidebar.dark-mode .nav-link {
      color: #ccc;
    }
    .sidebar.dark-mode .nav-link:hover,
    .sidebar.dark-mode .nav-link.active {
      background-color: #444;
      color: #fff;
    }
    
    .sidebar .logo-container {
      padding: 1rem;
      display: flex;
      justify-content: center;
      align-items: center;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }
    
    .sidebar .logo-text {
      font-size: 1.2rem;
      font-weight: 700;
      text-align: center;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    /* Footer styles */
    .app-footer {
      background-color: var(--dark-color);
      color: var(--light-color);
      text-align: center;
      padding: 1rem 0;
      position: relative;
      width: 100%;
      margin-top: 2rem;
      border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
    
    .app-footer a {
      color: var(--light-color);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    
    .app-footer a:hover {
      color: var(--primary-color);
    }
    
    /* Footer protection blur effect */
    .copyright-violated {
      position: relative;
      overflow: hidden;
    }
    
    /* Specifically targeting all content when copyright is violated */
    .copyright-violated .app-container,
    .copyright-violated .modal:not(.copyright-warning),
    .copyright-violated .sidebar,
    .copyright-violated .content-wrapper,
    .copyright-violated .navbar,
    .copyright-violated button:not(#restore-footer-btn) {
      filter: blur(10px);
      -webkit-filter: blur(10px);
      pointer-events: none;
      user-select: none;
      -webkit-user-select: none;
    }
    
    /* Warning overlay - ensure it's not blurred */
    .copyright-warning {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background-color: var(--danger-color);
      color: white;
      padding: 2rem;
      border-radius: 8px;
      z-index: 9999;
      text-align: center;
      box-shadow: 0 0 40px rgba(0, 0, 0, 0.7);
      max-width: 90%;
      filter: none !important;
      -webkit-filter: none !important;
      pointer-events: auto !important;
      user-select: auto !important;
      -webkit-user-select: auto !important;
    }
    
    .copyright-warning h3 {
      margin-bottom: 1rem;
    }
    
    .copyright-warning p {
      margin-bottom: 1.5rem;
    }
    
    .copyright-warning button {
      background-color: white;
      color: var(--danger-color);
      font-weight: bold;
      padding: 0.5rem 1.5rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .copyright-warning button:hover {
      background-color: var(--light-color);
    }
  </style>
</head>
<body>
  <div class="app-container d-flex">
    <!-- Sidebar Toggle Button -->
    <button class="sidebar-toggler" id="sidebar-toggle">
      <i class="fas fa-bars"></i>
    </button>
    
    <!-- Sidebar -->
    <div class="sidebar col-md-3 col-lg-2 d-md-block bg-white" id="sidebar">
      <div class="logo-container">
        <h4 class="logo-text">
          <span class="text-primary">Attendance</span><span class="text-dark">Manager</span>
        </h4>
      </div>
      <ul class="nav flex-column px-3">
        <li class="nav-item">
          <a class="nav-link active" href="#dashboard" data-page="dashboard">
            <i class="fas fa-tachometer-alt"></i> Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#take-attendance" data-page="take-attendance">
            <i class="fas fa-clipboard-check"></i> Take Attendance
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#view-records" data-page="view-records">
            <i class="fas fa-list"></i> View Records
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#reports" data-page="reports">
            <i class="fas fa-chart-bar"></i> Reports
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#notifications" data-page="notifications">
            <i class="fas fa-bell"></i> Notifications
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#settings" data-page="settings">
            <i class="fas fa-cog"></i> Settings
          </a>
        </li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="content-wrapper col-md-9 ms-sm-auto col-lg-10 px-md-4" id="content">
      <!-- Pages container - content changes based on navigation -->
      <div id="page-content">
        <!-- Dashboard page (default) -->
        <div id="dashboard-page">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Dashboard</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
              </div>
              <button type="button" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-calendar"></i> Today
              </button>
            </div>
          </div>

          <div class="row dashboard-stats mb-4">
            <div class="col-md-3 col-sm-6 mb-3">
              <div class="card border-left-success" style="border-left-color: var(--success-color);">
                <div class="card-body">
                  <div class="stat-title">PRESENT TODAY</div>
                  <div class="stat-value text-success">24</div>
                  <div class="text-muted">80% of total students</div>
                  <i class="fas fa-user-check stat-icon text-success"></i>
                </div>
              </div>
            </div>

            <div class="col-md-3 col-sm-6 mb-3">
              <div class="card border-left-danger" style="border-left-color: var(--danger-color);">
                <div class="card-body">
                  <div class="stat-title">ABSENT TODAY</div>
                  <div class="stat-value text-danger">6</div>
                  <div class="text-muted">20% of total students</div>
                  <i class="fas fa-user-times stat-icon text-danger"></i>
                </div>
              </div>
            </div>

            <div class="col-md-3 col-sm-6 mb-3">
              <div class="card border-left-warning" style="border-left-color: var(--warning-color);">
                <div class="card-body">
                  <div class="stat-title">LATE TODAY</div>
                  <div class="stat-value text-warning">3</div>
                  <div class="text-muted">10% of total students</div>
                  <i class="fas fa-clock stat-icon text-warning"></i>
                </div>
              </div>
            </div>

            <div class="col-md-3 col-sm-6 mb-3">
              <div class="card border-left-info" style="border-left-color: var(--info-color);">
                <div class="card-body">
                  <div class="stat-title">EXCUSED TODAY</div>
                  <div class="stat-value text-info">2</div>
                  <div class="text-muted">6.7% of total students</div>
                  <i class="fas fa-notes-medical stat-icon text-info"></i>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-8">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <span>Recent Attendance</span>
                  <button class="btn btn-sm btn-outline-primary">View All</button>
                </div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>Student</th>
                          <th>ID</th>
                          <th>Status</th>
                          <th>Date</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>
                            <div class="d-flex align-items-center">
                              <img src="images/student1.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 35px; height: 35px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student1.jpg">
                              Emma Thompson
                            </div>
                          </td>
                          <td>ST-2023-001</td>
                          <td><span class="status-badge status-present">Present</span></td>
                          <td>July 15, 2025</td>
                        </tr>
                        <tr>
                          <td>
                            <div class="d-flex align-items-center">
                              <img src="images/student2.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 35px; height: 35px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student2.jpg">
                              James Wilson
                            </div>
                          </td>
                          <td>ST-2023-002</td>
                          <td><span class="status-badge status-late">Late</span></td>
                          <td>July 15, 2025</td>
                        </tr>
                        <tr>
                          <td>
                            <div class="d-flex align-items-center">
                              <img src="images/student3.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 35px; height: 35px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student3.jpg">
                              Sophia Garcia
                            </div>
                          </td>
                          <td>ST-2023-003</td>
                          <td><span class="status-badge status-present">Present</span></td>
                          <td>July 15, 2025</td>
                        </tr>
                        <tr>
                          <td>
                            <div class="d-flex align-items-center">
                              <img src="images/student4.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 35px; height: 35px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student4.jpg">
                              Michael Brown
                            </div>
                          </td>
                          <td>ST-2023-004</td>
                          <td><span class="status-badge status-absent">Absent</span></td>
                          <td>July 15, 2025</td>
                        </tr>
                        <tr>
                          <td>
                            <div class="d-flex align-items-center">
                              <img src="images/student5.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 35px; height: 35px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student5.jpg">
                              Olivia Jones
                            </div>
                          </td>
                          <td>ST-2023-005</td>
                          <td><span class="status-badge status-excused">Excused</span></td>
                          <td>July 15, 2025</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <div class="card">
                <div class="card-header">Attendance Summary</div>
                <div class="card-body">
                  <canvas id="attendanceChart"></canvas>
                </div>
              </div>
              
              <div class="card mt-4">
                <div class="card-header">Upcoming Events</div>
                <div class="card-body p-0">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <div>
                        <div class="fw-medium">End of Term Testing</div>
                        <small class="text-muted">August 1, 2025</small>
                      </div>
                      <span class="badge bg-primary rounded-pill">5 days</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <div>
                        <div class="fw-medium">Parent-Teacher Conference</div>
                        <small class="text-muted">August 10, 2025</small>
                      </div>
                      <span class="badge bg-primary rounded-pill">14 days</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                      <div>
                        <div class="fw-medium">School Holiday</div>
                        <small class="text-muted">August 15, 2025</small>
                      </div>
                      <span class="badge bg-primary rounded-pill">19 days</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Take Attendance page -->
        <div id="take-attendance-page" style="display: none;">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Take Attendance</h1>
            <div>
              <button type="button" class="btn btn-outline-primary me-2" id="batch-attendance-btn">
                <i class="fas fa-users"></i> Batch Attendance
              </button>
              <button type="button" class="btn btn-primary" id="single-attendance-btn">
                <i class="fas fa-user"></i> Single Student
              </button>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-4">
              <div class="card attendance-form">
                <div class="card-header">
                  <i class="fas fa-clipboard-check me-2"></i>Attendance Form
                </div>
                <div class="card-body">
                  <form id="attendance-form">
                    <div class="mb-3">
                      <label for="student-name" class="form-label">Student Name</label>
                      <input type="text" class="form-control" id="student-name" placeholder="Enter student name" required>
                    </div>
                    
                    <div class="mb-3">
                      <label for="student-id" class="form-label">Student ID</label>
                      <input type="text" class="form-control" id="student-id" placeholder="Enter student ID" required>
                    </div>
                    
                    <div class="mb-3">
                      <label for="attendance-date" class="form-label">Date</label>
                      <input type="text" class="form-control" id="attendance-date" placeholder="Select date" required>
                    </div>
                    
                    <div class="mb-4">
                      <label for="attendance-status" class="form-label">Attendance Status</label>
                      <select class="form-select" id="attendance-status" required>
                        <option value="" selected disabled>Select status</option>
                        <option value="present">Present</option>
                        <option value="absent">Absent</option>
                        <option value="late">Late</option>
                        <option value="excused">Excused</option>
                      </select>
                    </div>
                    
                    <div class="mb-3" id="late-input" style="display: none;">
                      <label for="late-minutes" class="form-label">Minutes Late</label>
                      <input type="number" class="form-control" id="late-minutes" placeholder="Enter minutes late">
                    </div>
                    
                    <div class="mb-3" id="absence-reason" style="display: none;">
                      <label for="absence-notes" class="form-label">Reason for Absence/Excuse</label>
                      <textarea class="form-control" id="absence-notes" rows="3" placeholder="Enter reason (optional)"></textarea>
                    </div>
                    
                    <div class="d-grid gap-2">
                      <button type="submit" class="btn btn-primary" id="save-attendance-btn">
                        <span class="loading-spinner" style="display: none;"></span>
                        Save Attendance
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            
            <div class="col-md-6">
              <div class="card">
                <div class="card-header">
                  <i class="fas fa-search me-2"></i>Find Student
                </div>
                <div class="card-body">
                  <div class="input-group mb-3">
                    <input type="text" class="form-control" placeholder="Search by name or ID" id="student-search">
                    <button class="btn btn-outline-primary" type="button" id="search-btn">
                      <i class="fas fa-search"></i>
                    </button>
                  </div>
                  
                  <div class="student-results mt-3">
                    <div class="list-group">
                      <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                          <div class="fw-bold">Emma Thompson</div>
                          <small class="text-muted">ST-2023-001</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary select-student-btn">Select</button>
                      </div>
                      <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                          <div class="fw-bold">James Wilson</div>
                          <small class="text-muted">ST-2023-002</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary select-student-btn">Select</button>
                      </div>
                      <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                        <div>
                          <div class="fw-bold">Sophia Garcia</div>
                          <small class="text-muted">ST-2023-003</small>
                        </div>
                        <button class="btn btn-sm btn-outline-primary select-student-btn">Select</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="card mt-4">
                <div class="card-header">
                  <i class="fas fa-history me-2"></i>Recent Activity
                </div>
                <div class="card-body p-0">
                  <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <div class="d-flex align-items-center">
                          <img src="images/student1.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 40px; height: 40px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student1.jpg">
                          <h6 class="mb-1">Marked Emma Thompson as Present</h6>
                        </div>
                        <small>3 mins ago</small>
                      </div>
                      <small class="text-muted">July 15, 2025</small>
                    </li>
                    <li class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <div class="d-flex align-items-center">
                          <img src="images/student2.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 40px; height: 40px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student2.jpg">
                          <h6 class="mb-1">Marked James Wilson as Late</h6>
                        </div>
                        <small>5 mins ago</small>
                      </div>
                      <small class="text-muted">July 15, 2025</small>
                    </li>
                    <li class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <div class="d-flex align-items-center">
                          <img src="images/student3.jpg" alt="Student" class="rounded-circle me-2 student-thumbnail" style="width: 40px; height: 40px; object-fit: cover; cursor: pointer;" data-bs-toggle="modal" data-bs-target="#imagePreviewModal" data-img-src="images/student3.jpg">
                          <h6 class="mb-1">Marked Michael Brown as Absent</h6>
                        </div>
                        <small>10 mins ago</small>
                      </div>
                      <small class="text-muted">July 15, 2025</small>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- View Records page -->
        <div id="view-records-page" style="display: none;">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Attendance Records</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="input-group me-2">
                <input type="text" class="form-control" id="records-date-range" placeholder="Select date range">
                <button class="btn btn-outline-secondary" type="button" id="filter-btn">
                  <i class="fas fa-filter"></i>
                </button>
              </div>
              <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-secondary"><i class="fas fa-download"></i> Export</button>
                <button type="button" class="btn btn-sm btn-outline-secondary"><i class="fas fa-print"></i> Print</button>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-body">
              <ul class="nav nav-tabs" id="recordsTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button" role="tab" aria-controls="all" aria-selected="true">All</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="present-tab" data-bs-toggle="tab" data-bs-target="#present" type="button" role="tab" aria-controls="present" aria-selected="false">Present</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="absent-tab" data-bs-toggle="tab" data-bs-target="#absent" type="button" role="tab" aria-controls="absent" aria-selected="false">Absent</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="late-tab" data-bs-toggle="tab" data-bs-target="#late" type="button" role="tab" aria-controls="late" aria-selected="false">Late</button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="excused-tab" data-bs-toggle="tab" data-bs-target="#excused" type="button" role="tab" aria-controls="excused" aria-selected="false">Excused</button>
                </li>
              </ul>
              <div class="tab-content mt-3" id="recordsTabContent">
                <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all-tab">
                  <div class="table-responsive">
                    <table class="table table-hover attendance-table" id="all-records-table">
                      <thead>
                        <tr>
                          <th>Student</th>
                          <th>ID</th>
                          <th>Status</th>
                          <th>Date</th>
                          <th>Time</th>
                          <th>Notes</th>
                          <th>Actions</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>Emma Thompson</td>
                          <td>ST-2023-001</td>
                          <td><span class="status-badge status-present">Present</span></td>
                          <td>July 15, 2025</td>
                          <td>09:00 AM</td>
                          <td>-</td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary edit-record-btn"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-outline-danger delete-record-btn"><i class="fas fa-trash"></i></button>
                          </td>
                        </tr>
                        <tr>
                          <td>James Wilson</td>
                          <td>ST-2023-002</td>
                          <td><span class="status-badge status-late">Late</span></td>
                          <td>July 15, 2025</td>
                          <td>09:25 AM</td>
                          <td>Traffic delay</td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary edit-record-btn"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-outline-danger delete-record-btn"><i class="fas fa-trash"></i></button>
                          </td>
                        </tr>
                        <tr>
                          <td>Sophia Garcia</td>
                          <td>ST-2023-003</td>
                          <td><span class="status-badge status-present">Present</span></td>
                          <td>July 15, 2025</td>
                          <td>08:55 AM</td>
                          <td>-</td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary edit-record-btn"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-outline-danger delete-record-btn"><i class="fas fa-trash"></i></button>
                          </td>
                        </tr>
                        <tr>
                          <td>Michael Brown</td>
                          <td>ST-2023-004</td>
                          <td><span class="status-badge status-absent">Absent</span></td>
                          <td>July 15, 2025</td>
                          <td>-</td>
                          <td>No notification</td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary edit-record-btn"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-outline-danger delete-record-btn"><i class="fas fa-trash"></i></button>
                          </td>
                        </tr>
                        <tr>
                          <td>Olivia Jones</td>
                          <td>ST-2023-005</td>
                          <td><span class="status-badge status-excused">Excused</span></td>
                          <td>July 15, 2025</td>
                          <td>-</td>
                          <td>Doctor's appointment</td>
                          <td>
                            <button class="btn btn-sm btn-outline-primary edit-record-btn"><i class="fas fa-edit"></i></button>
                            <button class="btn btn-sm btn-outline-danger delete-record-btn"><i class="fas fa-trash"></i></button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="tab-pane fade" id="present" role="tabpanel" aria-labelledby="present-tab">
                  <!-- Present records will be displayed here -->
                </div>
                <div class="tab-pane fade" id="absent" role="tabpanel" aria-labelledby="absent-tab">
                  <!-- Absent records will be displayed here -->
                </div>
                <div class="tab-pane fade" id="late" role="tabpanel" aria-labelledby="late-tab">
                  <!-- Late records will be displayed here -->
                </div>
                <div class="tab-pane fade" id="excused" role="tabpanel" aria-labelledby="excused-tab">
                  <!-- Excused records will be displayed here -->
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Reports page -->
        <div id="reports-page" style="display: none;">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Attendance Reports</h1>
            <div class="btn-toolbar mb-2 mb-md-0">
              <div class="btn-group me-2">
                <button type="button" class="btn btn-sm btn-outline-secondary" id="pdf-export-btn"><i class="fas fa-file-pdf"></i> PDF</button>
                <button type="button" class="btn btn-sm btn-outline-secondary" id="excel-export-btn"><i class="fas fa-file-excel"></i> Excel</button>
                <button type="button" class="btn btn-sm btn-outline-secondary" id="print-report-btn"><i class="fas fa-print"></i> Print</button>
              </div>
              <button type="button" class="btn btn-sm btn-primary" id="generate-report-btn">
                <i class="fas fa-sync-alt"></i> Generate
              </button>
            </div>
          </div>

          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">Report Parameters</div>
                <div class="card-body">
                  <form id="report-form">
                    <div class="mb-3">
                      <label for="report-type" class="form-label">Report Type</label>
                      <select class="form-select" id="report-type">
                        <option value="daily">Daily Report</option>
                        <option value="weekly">Weekly Report</option>
                        <option value="monthly">Monthly Report</option>
                        <option value="custom">Custom Range</option>
                        <option value="student">Student-specific</option>
                      </select>
                    </div>
                    
                    <div class="mb-3">
                      <label for="report-date-range" class="form-label">Date Range</label>
                      <input type="text" class="form-control" id="report-date-range" placeholder="Select date range">
                    </div>
                    
                    <div class="mb-3" id="student-select-container" style="display: none;">
                      <label for="report-student" class="form-label">Student</label>
                      <select class="form-select" id="report-student">
                        <option value="">All Students</option>
                        <option value="ST-2023-001">Emma Thompson</option>
                        <option value="ST-2023-002">James Wilson</option>
                        <option value="ST-2023-003">Sophia Garcia</option>
                        <option value="ST-2023-004">Michael Brown</option>
                        <option value="ST-2023-005">Olivia Jones</option>
                      </select>
                    </div>
                    
                    <div class="mb-3">
                      <label for="report-format" class="form-label">Format</label>
                      <select class="form-select" id="report-format">
                        <option value="summary">Summary</option>
                        <option value="detailed">Detailed</option>
                        <option value="chart">Chart View</option>
                      </select>
                    </div>
                    
                    <div class="d-grid">
                      <button type="submit" class="btn btn-primary" id="apply-report-btn">
                        <span class="loading-spinner" style="display: none;"></span>
                        Apply Filters
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            
            <div class="col-md-8">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <span>Attendance Summary Report</span>
                  <span class="text-muted">July 10-15, 2025</span>
                </div>
                <div class="card-body">
                  <div id="report-visualization">
                    <canvas id="reportChart"></canvas>
                  </div>
                  
                  <div class="table-responsive mt-4">
                    <table class="table table-sm">
                      <thead>
                        <tr>
                          <th>Status</th>
                          <th>Count</th>
                          <th>Percentage</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td><span class="status-badge status-present">Present</span></td>
                          <td>124</td>
                          <td>82.7%</td>
                        </tr>
                        <tr>
                          <td><span class="status-badge status-absent">Absent</span></td>
                          <td>15</td>
                          <td>10.0%</td>
                        </tr>
                        <tr>
                          <td><span class="status-badge status-late">Late</span></td>
                          <td>8</td>
                          <td>5.3%</td>
                        </tr>
                        <tr>
                          <td><span class="status-badge status-excused">Excused</span></td>
                          <td>3</td>
                          <td>2.0%</td>
                        </tr>
                      </tbody>
                      <tfoot>
                        <tr class="fw-bold">
                          <td>Total</td>
                          <td>150</td>
                          <td>100%</td>
                        </tr>
                      </tfoot>
                    </table>
                  </div>
                </div>
              </div>
              
              <div class="card mt-4">
                <div class="card-header">Attendance Trends</div>
                <div class="card-body">
                  <canvas id="trendsChart"></canvas>
                </div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">Detailed Attendance Report</div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover table-sm" id="detailed-report-table">
                  <thead>
                    <tr>
                      <th>Student</th>
                      <th>ID</th>
                      <th>Present</th>
                      <th>Absent</th>
                      <th>Late</th>
                      <th>Excused</th>
                      <th>Attendance Rate</th>
                      <th>Details</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Emma Thompson</td>
                      <td>ST-2023-001</td>
                      <td>5</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0</td>
                      <td>100%</td>
                      <td><button class="btn btn-sm btn-outline-info view-details-btn"><i class="fas fa-chart-line"></i></button></td>
                    </tr>
                    <tr>
                      <td>James Wilson</td>
                      <td>ST-2023-002</td>
                      <td>3</td>
                      <td>1</td>
                      <td>1</td>
                      <td>0</td>
                      <td>80%</td>
                      <td><button class="btn btn-sm btn-outline-info view-details-btn"><i class="fas fa-chart-line"></i></button></td>
                    </tr>
                    <tr>
                      <td>Sophia Garcia</td>
                      <td>ST-2023-003</td>
                      <td>5</td>
                      <td>0</td>
                      <td>0</td>
                      <td>0</td>
                      <td>100%</td>
                      <td><button class="btn btn-sm btn-outline-info view-details-btn"><i class="fas fa-chart-line"></i></button></td>
                    </tr>
                    <tr>
                      <td>Michael Brown</td>
                      <td>ST-2023-004</td>
                      <td>3</td>
                      <td>2</td>
                      <td>0</td>
                      <td>0</td>
                      <td>60%</td>
                      <td><button class="btn btn-sm btn-outline-info view-details-btn"><i class="fas fa-chart-line"></i></button></td>
                    </tr>
                    <tr>
                      <td>Olivia Jones</td>
                      <td>ST-2023-005</td>
                      <td>4</td>
                      <td>0</td>
                      <td>0</td>
                      <td>1</td>
                      <td>80%</td>
                      <td><button class="btn btn-sm btn-outline-info view-details-btn"><i class="fas fa-chart-line"></i></button></td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

        <!-- Notifications page -->
        <div id="notifications-page" style="display: none;">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Absence Notifications</h1>
            <button type="button" class="btn btn-primary" id="new-notification-btn">
              <i class="fas fa-plus"></i> New Notification
            </button>
          </div>
          
          <div class="row mb-4">
            <div class="col-md-4">
              <div class="card">
                <div class="card-header">Notification Settings</div>
                <div class="card-body">
                  <form id="notification-settings-form">
                    <div class="mb-3">
                      <label class="form-label">Automatic Notifications</label>
                      <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="auto-notify-parents" checked>
                        <label class="form-check-label" for="auto-notify-parents">Notify parents for absences</label>
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="absence-threshold" class="form-label">Absence Threshold</label>
                      <select class="form-select" id="absence-threshold">
                        <option value="1">After 1 absence</option>
                        <option value="2" selected>After 2 absences</option>
                        <option value="3">After 3 absences</option>
                        <option value="5">After 5 absences</option>
                      </select>
                    </div>
                    
                    <div class="mb-3">
                      <label class="form-label">Notification Methods</label>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="notify-email" checked>
                        <label class="form-check-label" for="notify-email">Email</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="notify-sms" checked>
                        <label class="form-check-label" for="notify-sms">SMS</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="notify-app">
                        <label class="form-check-label" for="notify-app">Mobile App</label>
                      </div>
                    </div>
                    
                    <div class="mb-3">
                      <label for="notification-template" class="form-label">Default Message Template</label>
                      <textarea class="form-control" id="notification-template" rows="4">Dear Parent/Guardian,

This is to inform you that [STUDENT_NAME] was absent on [ABSENCE_DATE].

Please contact the school office for any clarification.

Regards,
School Administration</textarea>
                    </div>
                    
                    <div class="d-grid">
                      <button type="submit" class="btn btn-primary" id="save-notification-settings-btn">
                        Save Settings
                      </button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
            
            <div class="col-md-8">
              <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                  <span>Recent Notifications</span>
                  <button class="btn btn-sm btn-outline-primary" id="view-all-notifications-btn">View All</button>
                </div>
                <div class="card-body p-0">
                  <div class="list-group list-group-flush">
                    <div class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">Absence Notification - Michael Brown</h6>
                        <small class="text-muted">Today, 10:15 AM</small>
                      </div>
                      <p class="mb-1">Notification sent to parent regarding absence on July 15, 2025.</p>
                      <div class="d-flex justify-content-between align-items-center">
                        <small class="text-success"><i class="fas fa-check-circle"></i> Delivered (Email, SMS)</small>
                        <div>
                          <button class="btn btn-sm btn-outline-secondary me-1"><i class="fas fa-redo"></i> Resend</button>
                          <button class="btn btn-sm btn-outline-info"><i class="fas fa-eye"></i> View</button>
                        </div>
                      </div>
                    </div>
                    
                    <div class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">Absence Notification - James Wilson</h6>
                        <small class="text-muted">July 12, 2025, 09:30 AM</small>
                      </div>
                      <p class="mb-1">Notification sent to parent regarding absence on July 12, 2025.</p>
                      <div class="d-flex justify-content-between align-items-center">
                        <small class="text-success"><i class="fas fa-check-circle"></i> Delivered (Email)</small>
                        <div>
                          <button class="btn btn-sm btn-outline-secondary me-1"><i class="fas fa-redo"></i> Resend</button>
                          <button class="btn btn-sm btn-outline-info"><i class="fas fa-eye"></i> View</button>
                        </div>
                      </div>
                    </div>
                    
                    <div class="list-group-item">
                      <div class="d-flex w-100 justify-content-between">
                        <h6 class="mb-1">Absence Notification - Olivia Jones</h6>
                        <small class="text-muted">July 10, 2025, 11:45 AM</small>
                      </div>
                      <p class="mb-1">Notification sent to parent regarding excused absence on July 10, 2025.</p>
                      <div class="d-flex justify-content-between align-items-center">
                        <small class="text-success"><i class="fas fa-check-circle"></i> Delivered (Email, SMS)</small>
                        <div>
                          <button class="btn btn-sm btn-outline-secondary me-1"><i class="fas fa-redo"></i> Resend</button>
                          <button class="btn btn-sm btn-outline-info"><i class="fas fa-eye"></i> View</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="card mt-4">
                <div class="card-header">Students Requiring Notification</div>
                <div class="card-body">
                  <div class="table-responsive">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>Student</th>
                          <th>ID</th>
                          <th>Absence Date</th>
                          <th>Status</th>
                          <th>Action</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>Michael Brown</td>
                          <td>ST-2023-004</td>
                          <td>July 15, 2025</td>
                          <td><span class="badge bg-warning">Pending</span></td>
                          <td>
                            <button class="btn btn-sm btn-primary notify-btn"><i class="fas fa-paper-plane"></i> Notify</button>
                          </td>
                        </tr>
                        <tr>
                          <td>William Davis</td>
                          <td>ST-2023-008</td>
                          <td>July 15, 2025</td>
                          <td><span class="badge bg-warning">Pending</span></td>
                          <td>
                            <button class="btn btn-sm btn-primary notify-btn"><i class="fas fa-paper-plane"></i> Notify</button>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Settings page -->
        <div id="settings-page" style="display: none;">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h1 class="page-title">Settings</h1>
            <button type="button" class="btn btn-primary" id="save-all-settings-btn">
              <i class="fas fa-save"></i> Save All Settings
            </button>
          </div>
          
          <div class="row">
            <div class="col-md-3 mb-4">
              <div class="list-group" id="settings-tabs">
                <a href="#general-settings" class="list-group-item list-group-item-action active" data-bs-toggle="list">
                  <i class="fas fa-cog me-2"></i> General
                </a>
                <a href="#profile-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                  <i class="fas fa-user me-2"></i> Profile
                </a>
                <a href="#notification-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                  <i class="fas fa-bell me-2"></i> Notifications
                </a>
                <a href="#appearance-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                  <i class="fas fa-palette me-2"></i> Appearance
                </a>
                <a href="#data-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                  <i class="fas fa-database me-2"></i> Data Management
                </a>
                <a href="#api-settings" class="list-group-item list-group-item-action" data-bs-toggle="list">
                  <i class="fas fa-plug me-2"></i> API Integration
                </a>
              </div>
            </div>
            
            <div class="col-md-9">
              <div class="tab-content">
                <div class="tab-pane fade show active" id="general-settings">
                  <div class="card">
                    <div class="card-header">General Settings</div>
                    <div class="card-body">
                      <form id="general-settings-form">
                        <div class="mb-3">
                          <label for="school-name" class="form-label">School Name</label>
                          <input type="text" class="form-control" id="school-name" value="Westside High School">
                        </div>
                        
                        <div class="mb-3">
                          <label for="academic-year" class="form-label">Academic Year</label>
                          <input type="text" class="form-control" id="academic-year" value="2025-2026">
                        </div>
                        
                        <div class="mb-3">
                          <label for="timezone" class="form-label">Timezone</label>
                          <select class="form-select" id="timezone">
                            <option value="UTC-8" selected>Pacific Time (UTC-8)</option>
                            <option value="UTC-7">Mountain Time (UTC-7)</option>
                            <option value="UTC-6">Central Time (UTC-6)</option>
                            <option value="UTC-5">Eastern Time (UTC-5)</option>
                            <option value="UTC-4">Atlantic Time (UTC-4)</option>
                          </select>
                        </div>
                        
                        <div class="mb-3">
                          <label for="date-format" class="form-label">Date Format</label>
                          <select class="form-select" id="date-format">
                            <option value="MM/DD/YYYY" selected>MM/DD/YYYY</option>
                            <option value="DD/MM/YYYY">DD/MM/YYYY</option>
                            <option value="YYYY-MM-DD">YYYY-MM-DD</option>
                            <option value="DD-MMM-YYYY">DD-MMM-YYYY</option>
                          </select>
                        </div>
                        
                        <div class="mb-3">
                          <label for="time-format" class="form-label">Time Format</label>
                          <select class="form-select" id="time-format">
                            <option value="12h" selected>12-hour (AM/PM)</option>
                            <option value="24h">24-hour</option>
                          </select>
                        </div>
                        
                        <div class="mb-3">
                          <label class="form-label">School Days</label>
                          <div class="d-flex flex-wrap">
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-monday" checked>
                              <label class="form-check-label" for="day-monday">Monday</label>
                            </div>
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-tuesday" checked>
                              <label class="form-check-label" for="day-tuesday">Tuesday</label>
                            </div>
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-wednesday" checked>
                              <label class="form-check-label" for="day-wednesday">Wednesday</label>
                            </div>
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-thursday" checked>
                              <label class="form-check-label" for="day-thursday">Thursday</label>
                            </div>
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-friday" checked>
                              <label class="form-check-label" for="day-friday">Friday</label>
                            </div>
                            <div class="form-check me-3">
                              <input class="form-check-input" type="checkbox" id="day-saturday">
                              <label class="form-check-label" for="day-saturday">Saturday</label>
                            </div>
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" id="day-sunday">
                              <label class="form-check-label" for="day-sunday">Sunday</label>
                            </div>
                          </div>
                        </div>
                        
                        <div class="mb-3">
                          <label for="school-start-time" class="form-label">School Start Time</label>
                          <input type="time" class="form-control" id="school-start-time" value="09:00">
                        </div>
                        
                        <div class="mb-3">
                          <label for="late-threshold" class="form-label">Late Threshold (minutes)</label>
                          <input type="number" class="form-control" id="late-threshold" value="15">
                        </div>
                        
                        <button type="submit" class="btn btn-primary">Save General Settings</button>
                      </form>
                    </div>
                  </div>
                </div>
                
                <div class="tab-pane fade" id="profile-settings">
                  <!-- Profile settings content -->
                </div>
                
                <div class="tab-pane fade" id="notification-settings">
                  <!-- Notification settings content -->
                </div>
                
                <div class="tab-pane fade" id="appearance-settings">
                  <!-- Appearance settings content -->
                </div>
                
                <div class="tab-pane fade" id="data-settings">
                  <!-- Data management settings content -->
                </div>
                
                <div class="tab-pane fade" id="api-settings">
                  <!-- API integration settings content -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Footer -->
      <footer class="app-footer">
        <div class="container">
          <div class="row">
            <div class="col-md-12">
              <p class="mb-0">
                <span>&copy; 2025 Student Attendance Manager</span>
                <span class="mx-2">|</span>
                <span>Developed by <a href="#" class="fw-bold">Namoc</a></span>
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>

  <!-- Edit Record Modal -->
  <div class="modal fade" id="editRecordModal" tabindex="-1" aria-labelledby="editRecordModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editRecordModalLabel">Edit Attendance Record</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="edit-record-form">
            <div class="mb-3">
              <label for="edit-student-name" class="form-label">Student Name</label>
              <input type="text" class="form-control" id="edit-student-name" value="James Wilson" readonly>
            </div>
            
            <div class="mb-3">
              <label for="edit-student-id" class="form-label">Student ID</label>
              <input type="text" class="form-control" id="edit-student-id" value="ST-2023-002" readonly>
            </div>
            
            <div class="mb-3">
              <label for="edit-attendance-date" class="form-label">Date</label>
              <input type="text" class="form-control" id="edit-attendance-date" value="July 15, 2025">
            </div>
            
            <div class="mb-3">
              <label for="edit-attendance-status" class="form-label">Attendance Status</label>
              <select class="form-select" id="edit-attendance-status">
                <option value="present">Present</option>
                <option value="absent">Absent</option>
                <option value="late" selected>Late</option>
                <option value="excused">Excused</option>
              </select>
            </div>
            
            <div class="mb-3">
              <label for="edit-attendance-time" class="form-label">Time</label>
              <input type="time" class="form-control" id="edit-attendance-time" value="09:25">
            </div>
            
            <div class="mb-3">
              <label for="edit-attendance-notes" class="form-label">Notes</label>
              <textarea class="form-control" id="edit-attendance-notes" rows="3">Traffic delay</textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="save-edit-btn">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal fade" id="deleteConfirmModal" tabindex="-1" aria-labelledby="deleteConfirmModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteConfirmModalLabel">Confirm Delete</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to delete this attendance record? This action cannot be undone.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" id="confirm-delete-btn">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Create Notification Modal -->
  <div class="modal fade" id="createNotificationModal" tabindex="-1" aria-labelledby="createNotificationModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="createNotificationModalLabel">Create Notification</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="create-notification-form">
            <div class="row mb-3">
              <div class="col-md-6">
                <label for="notification-student" class="form-label">Student</label>
                <select class="form-select" id="notification-student">
                  <option value="" selected disabled>Select student</option>
                  <option value="ST-2023-001">Emma Thompson</option>
                  <option value="ST-2023-002">James Wilson</option>
                  <option value="ST-2023-003">Sophia Garcia</option>
                  <option value="ST-2023-004">Michael Brown</option>
                  <option value="ST-2023-005">Olivia Jones</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="notification-for-date" class="form-label">For Absence Date</label>
                <input type="text" class="form-control" id="notification-for-date" placeholder="Select date">
              </div>
            </div>
            
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">Notification Methods</label>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="notification-email" checked>
                  <label class="form-check-label" for="notification-email">Email</label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="checkbox" id="notification-sms" checked>
                  <label class="form-check-label" for="notification-sms">SMS</label>
                </div>
              </div>
              <div class="col-md-6">
                <label for="notification-parent" class="form-label">Parent/Guardian</label>
                <input type="text" class="form-control" id="notification-parent" value="John Thompson" readonly>
              </div>
            </div>
            
            <div class="mb-3">
              <label for="notification-subject" class="form-label">Subject</label>
              <input type="text" class="form-control" id="notification-subject" value="Student Absence Notification">
            </div>
            
            <div class="mb-3">
              <label for="notification-message" class="form-label">Message</label>
              <textarea class="form-control" id="notification-message" rows="5">Dear Parent/Guardian,

This is to inform you that [STUDENT_NAME] was absent on [ABSENCE_DATE].

Please contact the school office for any clarification.

Regards,
School Administration</textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" id="send-notification-btn">
            <i class="fas fa-paper-plane"></i> Send Notification
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Student Details Modal -->
  <div class="modal fade" id="studentDetailsModal" tabindex="-1" aria-labelledby="studentDetailsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="studentDetailsModalLabel">Student Attendance Details</h5>
          <button type="button" class="btn btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="d-flex align-items-center mb-4">
            <div class="flex-shrink-0">
              <img src="images/student-profile.jpg" alt="Student Profile" class="rounded-circle student-profile-img" style="width: 80px; height: 80px; object-fit: cover;">
            </div>
            <div class="flex-grow-1 ms-3">
              <h5 class="mb-0">Michael Brown</h5>
              <p class="text-muted mb-0">ID: ST-2023-004</p>
            </div>
            <div>
              <span class="badge bg-danger">60% Attendance</span>
            </div>
          </div>
          
          <ul class="nav nav-tabs" id="studentDetailsTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="chart-tab" data-bs-toggle="tab" data-bs-target="#chart-content" type="button" role="tab" aria-controls="chart-content" aria-selected="true">Attendance Chart</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history-content" type="button" role="tab" aria-controls="history-content" aria-selected="false">Attendance History</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="patterns-tab" data-bs-toggle="tab" data-bs-target="#patterns-content" type="button" role="tab" aria-controls="patterns-content" aria-selected="false">Patterns</button>
            </li>
          </ul>
          
          <div class="tab-content mt-3" id="studentDetailsTabContent">
            <div class="tab-pane fade show active" id="chart-content" role="tabpanel" aria-labelledby="chart-tab">
              <canvas id="studentAttendanceChart"></canvas>
            </div>
            <div class="tab-pane fade" id="history-content" role="tabpanel" aria-labelledby="history-tab">
              <div class="table-responsive">
                <table class="table table-hover">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>Status</th>
                      <th>Time</th>
                      <th>Notes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>July 15, 2025</td>
                      <td><span class="status-badge status-absent">Absent</span></td>
                      <td>-</td>
                      <td>No notification</td>
                    </tr>
                    <tr>
                      <td>July 14, 2025</td>
                      <td><span class="status-badge status-present">Present</span></td>
                      <td>08:55 AM</td>
                      <td>-</td>
                    </tr>
                    <tr>
                      <td>July 13, 2025</td>
                      <td><span class="status-badge status-present">Present</span></td>
                      <td>08:58 AM</td>
                      <td>-</td>
                    </tr>
                    <tr>
                      <td>July 12, 2025</td>
                      <td><span class="status-badge status-absent">Absent</span></td>
                      <td>-</td>
                      <td>Sick leave</td>
                    </tr>
                    <tr>
                      <td>July 11, 2025</td>
                      <td><span class="status-badge status-present">Present</span></td>
                      <td>09:02 AM</td>
                      <td>-</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div class="tab-pane fade" id="patterns-content" role="tabpanel" aria-labelledby="patterns-tab">
              <div class="card">
                <div class="card-body">
                  <h6>Attendance Patterns</h6>
                  <ul>
                    <li>Most frequent absences on: <strong>Friday</strong></li>
                    <li>Average arrival time: <strong>08:58 AM</strong></li>
                    <li>Most recent trend: <strong>Improving</strong></li>
                  </ul>
                  
                  <div class="alert alert-warning mt-3">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    <strong>Attendance Alert:</strong> This student has missed 40% of classes in the current month.
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Student Image Preview Modal -->
  <div class="modal fade" id="imagePreviewModal" tabindex="-1" aria-labelledby="imagePreviewModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="imagePreviewModalLabel">Student Photo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center">
          <img id="preview-image" src="" alt="Student Photo" class="img-fluid rounded" style="max-height: 500px;">
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <!-- Toastify JS -->
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  
  <!-- Flatpickr (for date picking) -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  
  <!-- DataTables -->
  <script src="https://cdn.datatables.net/1.13.5/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.5/js/dataTables.bootstrap5.min.js"></script>

  <script id="app-script">
    $(document).ready(function() {
      // Set initial sidebar state based on screen size
      function initSidebar() {
        if ($(window).width() < 768) {
          $('#sidebar').addClass('collapsed');
          $('#content').addClass('expanded');
          $('#sidebar-toggle').removeClass('active');
        } else {
          $('#sidebar').removeClass('collapsed');
          $('#content').removeClass('expanded');
          $('#sidebar-toggle').addClass('active');
        }
      }
      
      // Initialize sidebar on page load
      initSidebar();
      
      // Sidebar toggle functionality
      $('#sidebar-toggle').click(function(e) {
        e.preventDefault();
        $('#sidebar').toggleClass('collapsed');
        $('#content').toggleClass('expanded');
        $(this).toggleClass('active');
      });
      
      // Handle window resize
      $(window).resize(function() {
        initSidebar();
      });
    
      // Updated Page navigation for sidebar with fade animations
      $('.sidebar .nav-link').click(function(e) {
        e.preventDefault();
        const page = $(this).data('page');
        
        // Remove fade-in effect from all pages and fade out current pages
        $('#page-content > div').removeClass('fade-in').fadeOut(300, function() {
          // After fade out completes, fade in the selected page with the fade-in class
          $(`#${page}-page`).fadeIn(300).addClass('fade-in');
        });
        
        // Update active state with slide indicator animation
        $('.sidebar .nav-link').removeClass('active');
        $(this).addClass('active');
        
        // On mobile, hide sidebar after selection
        if ($(window).width() < 768) {
          $('#sidebar').addClass('collapsed');
          $('#content').addClass('expanded');
          $('#sidebar-toggle').removeClass('active');
        }
      });

      // Optionally add dark mode class when needed (toggle can be enabled later)
      // For now, the sidebar remains with the possibility by adding the class "dark-mode" if required.
      // Example: $('.sidebar').addClass('dark-mode');

      // Initialize date pickers
      flatpickr("#attendance-date", {
        dateFormat: "Y-m-d",
        defaultDate: new Date()
      });
      
      flatpickr("#notification-for-date", {
        dateFormat: "Y-m-d",
        defaultDate: new Date()
      });
      
      flatpickr("#records-date-range", {
        mode: "range",
        dateFormat: "Y-m-d",
        defaultDate: [new Date().setDate(new Date().getDate() - 7), new Date()]
      });
      
      flatpickr("#report-date-range", {
        mode: "range",
        dateFormat: "Y-m-d",
        defaultDate: [new Date().setDate(new Date().getDate() - 7), new Date()]
      });
      
      // Initialize DataTables
      $('#all-records-table').DataTable({
        responsive: true,
        language: {
          search: "",
          searchPlaceholder: "Search records...",
        },
        dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>" +
             "<'row'<'col-sm-12'tr>>" +
             "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
      });
      
      $('#detailed-report-table').DataTable({
        responsive: true,
        language: {
          search: "",
          searchPlaceholder: "Search...",
        },
        dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>>" +
             "<'row'<'col-sm-12'tr>>" +
             "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
      });
      
      // Show/hide fields based on attendance status
      $('#attendance-status').change(function() {
        const status = $(this).val();
        
        if (status === 'late') {
          $('#late-input').show();
          $('#absence-reason').hide();
        } else if (status === 'absent' || status === 'excused') {
          $('#late-input').hide();
          $('#absence-reason').show();
        } else {
          $('#late-input').hide();
          $('#absence-reason').hide();
        }
      });
      
      // Attendance form submission
      $('#attendance-form').submit(function(e) {
        e.preventDefault();
        
        const saveBtn = $('#save-attendance-btn');
        const spinner = saveBtn.find('.loading-spinner');
        
        // Show loading state
        saveBtn.prop('disabled', true);
        spinner.show();
        
        // Simulate API call
        setTimeout(function() {
          // Hide loading state
          saveBtn.prop('disabled', false);
          spinner.hide();
          
          // Show success notification
          Toastify({
            text: "Attendance recorded successfully!",
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            backgroundColor: "var(--success-color)",
            stopOnFocus: true,
            className: "toastify-custom",
          }).showToast();
          
          // Reset form
          $('#attendance-form')[0].reset();
          $('#late-input').hide();
          $('#absence-reason').hide();
        }, 1000);
      });
      
      // Initialize charts
      const attendanceCtx = document.getElementById('attendanceChart').getContext('2d');
      const attendanceChart = new Chart(attendanceCtx, {
        type: 'doughnut',
        data: {
          labels: ['Present', 'Absent', 'Late', 'Excused'],
          datasets: [{
            data: [124, 15, 8, 3],
            backgroundColor: [
              'rgba(76, 175, 80, 0.7)',
              'rgba(244, 67, 54, 0.7)',
              'rgba(255, 152, 0, 0.7)',
              'rgba(33, 150, 243, 0.7)'
            ],
            borderColor: [
              'rgba(76, 175, 80, 1)',
              'rgba(244, 67, 54, 1)',
              'rgba(255, 152, 0, 1)',
              'rgba(33, 150, 243, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom'
            }
          }
        }
      });
      
      const trendsCtx = document.getElementById('trendsChart').getContext('2d');
      const trendsChart = new Chart(trendsCtx, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
          datasets: [
            {
              label: 'Present',
              data: [28, 25, 27, 24, 20],
              borderColor: 'rgba(76, 175, 80, 1)',
              backgroundColor: 'rgba(76, 175, 80, 0.1)',
              tension: 0.4,
              fill: true
            },
            {
              label: 'Absent',
              data: [2, 5, 3, 6, 4],
              borderColor: 'rgba(244, 67, 54, 1)',
              backgroundColor: 'rgba(244, 67, 54, 0.1)',
              tension: 0.4,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });
      
      const reportCtx = document.getElementById('reportChart').getContext('2d');
      const reportChart = new Chart(reportCtx, {
        type: 'bar',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri'],
          datasets: [
            {
              label: 'Present',
              data: [28, 25, 27, 24, 20],
              backgroundColor: 'rgba(76, 175, 80, 0.7)'
            },
            {
              label: 'Absent',
              data: [2, 5, 3, 6, 4],
              backgroundColor: 'rgba(244, 67, 54, 0.7)'
            },
            {
              label: 'Late',
              data: [1, 2, 1, 2, 2],
              backgroundColor: 'rgba(255, 152, 0, 0.7)'
            },
            {
              label: 'Excused',
              data: [0, 1, 0, 1, 1],
              backgroundColor: 'rgba(33, 150, 243, 0.7)'
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              stacked: true
            },
            y: {
              stacked: true,
              beginAtZero: true
            }
          }
        }
      });
      
      // Student details chart
      const studentCtx = document.getElementById('studentAttendanceChart').getContext('2d');
      const studentChart = new Chart(studentCtx, {
        type: 'pie',
        data: {
          labels: ['Present', 'Absent', 'Late', 'Excused'],
          datasets: [{
            data: [3, 2, 0, 0],
            backgroundColor: [
              'rgba(76, 175, 80, 0.7)',
              'rgba(244, 67, 54, 0.7)',
              'rgba(255, 152, 0, 0.7)',
              'rgba(33, 150, 243, 0.7)'
            ],
            borderColor: [
              'rgba(76, 175, 80, 1)',
              'rgba(244, 67, 54, 1)',
              'rgba(255, 152, 0, 1)',
              'rgba(33, 150, 243, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom'
            }
          }
        }
      });
      
      // Show Edit Record Modal
      $(document).on('click', '.edit-record-btn', function() {
        $('#editRecordModal').modal('show');
      });
      
      // Delete Record Confirmation
      $(document).on('click', '.delete-record-btn', function() {
        $('#deleteConfirmModal').modal('show');
      });
      
      // Confirm Delete
      $('#confirm-delete-btn').click(function() {
        // Simulate delete operation
        $('#deleteConfirmModal').modal('hide');
        
        // Show success notification
        Toastify({
          text: "Record deleted successfully!",
          duration: 3000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--success-color)",
        }).showToast();
      });
      
      // Save Edited Record
      $('#save-edit-btn').click(function() {
        // Simulate save operation
        $('#editRecordModal').modal('hide');
        
        // Show success notification
        Toastify({
          text: "Record updated successfully!",
          duration: 3000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--success-color)",
        }).showToast();
      });
      
      // New Notification Button
      $('#new-notification-btn').click(function() {
        $('#createNotificationModal').modal('show');
      });
      
      // Send Notification
      $('#send-notification-btn').click(function() {
        // Simulate send operation
        const btn = $(this);
        
        // Show loading state
        btn.prop('disabled', true);
        btn.html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Sending...');
        
        setTimeout(function() {
          $('#createNotificationModal').modal('hide');
          
          // Reset button state
          btn.prop('disabled', false);
          btn.html('<i class="fas fa-paper-plane"></i> Send Notification');
          
          // Show success notification
          Toastify({
            text: "Notification sent successfully!",
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            backgroundColor: "var(--success-color)",
          }).showToast();
        }, 1500);
      });
      
      // View Student Details
      $(document).on('click', '.view-details-btn', function() {
        $('#studentDetailsModal').modal('show');
      });
      
      // Generate Report Button
      $('#generate-report-btn').click(function() {
        // Simulate report generation
        const btn = $(this);
        
        // Show loading state
        btn.prop('disabled', true);
        btn.html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Generating...');
        
        setTimeout(function() {
          // Reset button state
          btn.prop('disabled', false);
          btn.html('<i class="fas fa-sync-alt"></i> Generate');
          
          // Show success notification
          Toastify({
            text: "Report generated successfully!",
            duration: 3000,
            close: true,
            gravity: "top",
            position: "right",
            backgroundColor: "var(--success-color)",
          }).showToast();
        }, 1500);
      });
      
      // Report type change
      $('#report-type').change(function() {
        const type = $(this).val();
        
        if (type === 'student') {
          $('#student-select-container').show();
        } else {
          $('#student-select-container').hide();
        }
      });
      
      // Select Student Button
      $('.select-student-btn').click(function() {
        const studentName = $(this).siblings('div').find('.fw-bold').text();
        const studentId = $(this).siblings('div').find('small').text();
        
        $('#student-name').val(studentName);
        $('#student-id').val(studentId);
      });
      
      // Initialize settings tabs
      $('#settings-tabs a').on('click', function (e) {
        e.preventDefault();
        $(this).tab('show');
      });
      
      // General settings form submission
      $('#general-settings-form').submit(function(e) {
        e.preventDefault();
        
        // Simulate save operation
        Toastify({
          text: "General settings saved!",
          duration: 3000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--success-color)",
        }).showToast();
      });
      
      // Save all settings
      $('#save-all-settings-btn').click(function() {
        // Simulate save operation
        Toastify({
          text: "All settings saved successfully!",
          duration: 3000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--success-color)",
        }).showToast();
      });
      
      // Batch Attendance Button
      $('#batch-attendance-btn').click(function() {
        // Simulate functionality
        Toastify({
          text: "This is a prototype. Batch attendance will be implemented in the full version.",
          duration: 4000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--info-color)",
        }).showToast();
      });
      
      // Export buttons
      $('#pdf-export-btn, #excel-export-btn, #print-report-btn').click(function() {
        // Simulate export functionality
        Toastify({
          text: "This is a prototype. Export functionality will be implemented in the full version.",
          duration: 4000,
          close: true,
          gravity: "top",
          position: "right",
          backgroundColor: "var(--info-color)",
        }).showToast();
      });

      // Image preview functionality
      $(document).on('click', '.student-thumbnail', function() {
        const imgSrc = $(this).data('img-src');
        $('#preview-image').attr('src', imgSrc);
      });
      
      // Make student profile images in modals clickable
      $(document).on('click', '.student-profile-img', function() {
        const imgSrc = $(this).attr('src');
        $('#preview-image').attr('src', imgSrc);
        $('#imagePreviewModal').modal('show');
      });

      // Footer copyright protection
      const ownerName = "Namoc";
      const footerElement = $('.app-footer a.fw-bold');
      
      // Store the original footer content
      const originalOwnerName = footerElement.text();
      
      // Function to check footer integrity with focus on the name
      function checkFooterIntegrity() {
        const footerExists = $('.app-footer').length > 0;
        const ownerElementExists = $('.app-footer a.fw-bold').length > 0;
        const currentOwnerName = ownerElementExists ? $('.app-footer a.fw-bold').text() : '';
        
        // Check if footer exists and specifically if Namoc name is unchanged
        if (!footerExists || !ownerElementExists || currentOwnerName !== ownerName) {
          // Apply blur to the entire body
          $('body').addClass('copyright-violated');
          
          // Show warning if not already showing
          if (!$('.copyright-warning').length) {
            // Create a separate container for the warning that won't be affected by blur
            $('body').append(`
              <div class="copyright-warning">
                <h3><i class="fas fa-exclamation-triangle me-2"></i>Copyright Violation Detected</h3>
                <p>The footer with developer credit "Developed by Namoc" has been modified or removed.</p>
                
                <div style="text-align: left; margin: 1rem 0;">
                  <p><strong>To restore access to this application:</strong></p>
                  <ol style="padding-left: 1.5rem;">
                    <li>Open your browser's developer tools (F12 or right-click → Inspect)</li>
                    <li>Find the footer element and restore it exactly as shown below:</li>
                  </ol>
                </div>
                
                <div style="background-color: rgba(0,0,0,0.3); padding: 1rem; border-radius: 4px; text-align: left; font-family: monospace; margin: 1rem 0; white-space: pre-wrap; max-height: 150px; overflow-y: auto;">
&lt;footer class="app-footer"&gt;
  &lt;div class="container"&gt;
    &lt;div class="row"&gt;
      &lt;div class="col-md-12"&gt;
        &lt;p class="mb-0"&gt;
          &lt;span&gt;&copy; 2025 Student Attendance Manager&lt;/span&gt;
          &lt;span class="mx-2"&gt;|&lt;/span&gt;
          &lt;span&gt;Developed by &lt;a href="#" class="fw-bold"&gt;Namoc&lt;/a&gt;&lt;/span&gt;
        &lt;/p&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/footer&gt;
                </div>
                
                <p>After restoring the exact footer code, click the button below to reload the page.</p>
                <button id="reload-page-btn" class="mt-2">Reload Page</button>
              </div>
            `);
            
            // Reload button only refreshes the page
            $('#reload-page-btn').click(function() {
              location.reload();
            });
          }
        }
      }
      
      // Run check on document changes
      const observer = new MutationObserver(function(mutations) {
        checkFooterIntegrity();
      });
      
      // Configure and start the observer
      observer.observe(document.body, { 
        childList: true, 
        subtree: true,
        characterData: true,
        characterDataOldValue: true
      });
      
      // Check periodically as well (in case DOM mutation events are missed)
      setInterval(checkFooterIntegrity, 2000);
      
      // Check on initial load
      checkFooterIntegrity();
    });
  </script>
</body>
</html>